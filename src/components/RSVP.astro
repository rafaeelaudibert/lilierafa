---
import EmailIcon from "../assets/email.svg"
import PhoneIcon from "../assets/phone.svg"
import { WEDDING_CONFIG, type Locale } from "../constants/wedding"
import { getLocale } from "astro-i18n-aut"

const locale = getLocale(Astro.url) as Locale
const config = WEDDING_CONFIG[locale]
---

<section class="py-20">
  <!-- Two-column layout with image on right, form on left -->
  <div
    class="flex flex-col-reverse gap-12 lg:flex-row lg:gap-2 lg:items-stretch"
  >
    <!-- Form column - left side -->
    <div
      class="flex-1 flex flex-col justify-center min-w-0 bg-[var(--beige)] p-4"
    >
      <!-- Header -->
      <div class="mb-8">
        <div
          id="rsvp"
          class="text-gray-400 text-sm uppercase tracking-wide mb-2"
        >
          RSVP
        </div>
        <h2 class="text-4xl md:text-5xl font-bold text-gray-800 leading-tight">
          {config.rsvp.title}<br />
          <span class="text-[var(--brown)]">{config.rsvp.detail}</span>
        </h2>
      </div>

      <!-- Instructions and contact info -->
      <div class="mb-8">
        <p class="text-gray-600 text-sm mb-6">
          {config.rsvp.description}
        </p>

        <!-- Contact info -->
        <div class="flex flex-col gap-3 text-sm text-gray-600 mb-8">
          <div class="flex items-center gap-2">
            <EmailIcon />
            <a
              href={`mailto:${config.contact.email}`}
              class="underline hover:text-gray-800 transition-colors"
            >
              {config.contact.email}
            </a>
          </div>
          <div class="flex items-center gap-2">
            <PhoneIcon />
            <a
              href={`tel:${config.contact.phone.replace(/\s/g, "")}`}
              class="underline hover:text-gray-800 transition-colors"
            >
              {config.contact.phone}
            </a>
          </div>
        </div>
      </div>

      <!-- RSVP Form -->
      <form class="space-y-6">
        <!-- Name field -->
        <div>
          <label
            for="name"
            class="block text-sm font-medium text-gray-700 mb-2"
          >
            {config.rsvp.name.label} *
          </label>
          <input
            type="text"
            id="name"
            name="name"
            required
            class="w-full px-4 py-3 bg-[#F5F1EB] border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--brown)] focus:border-transparent transition-colors"
            placeholder={config.rsvp.name.placeholder}
          />
        </div>

        <!-- Email field -->
        <div>
          <label
            for="email"
            class="block text-sm font-medium text-gray-700 mb-2"
          >
            {config.rsvp.email.label} *
          </label>
          <input
            type="email"
            id="email"
            name="email"
            required
            class="w-full px-4 py-3 bg-[#F5F1EB] border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--brown)] focus:border-transparent transition-colors"
            placeholder={config.rsvp.email.placeholder}
          />
        </div>

        <!-- Additional info -->
        <div>
          <label
            for="dietary"
            class="block text-sm font-medium text-gray-700 mb-2"
          >
            {config.rsvp.extra.label}
          </label>
          <textarea
            id="dietary"
            name="dietary"
            rows="4"
            class="w-full px-4 py-3 bg-[#F5F1EB] border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--brown)] focus:border-transparent transition-colors resize-none"
            placeholder={config.rsvp.extra.placeholder}></textarea>
        </div>

        <!-- Submit button -->
        <button
          type="submit"
          class="w-full bg-[var(--brown)] text-white py-3 px-6 rounded-lg font-medium hover:bg-[#7A6248] transition-colors focus:ring-2 focus:ring-[var(--brown)] focus:ring-offset-2"
        >
          {config.rsvp.submit}
        </button>
      </form>
    </div>

    <!-- Image column - right side, full height -->
    <div class="flex-shrink-0 lg:w-1/2">
      <div class="h-full min-h-[400px] lg:min-h-full">
        <img
          src="https://picsum.photos/seed/rsvp-couple/600/600"
          alt={config.couple.them}
          class="w-full h-full object-cover"
        />
      </div>
    </div>
  </div>
</section>
